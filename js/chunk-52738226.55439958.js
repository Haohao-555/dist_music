(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-52738226"],{"05d7":function(t,e,n){"use strict";n("9473")},1054:function(t,e){var n=1..valueOf;t.exports=function(t){return n.call(t)}},"154b":function(t,e,n){"use strict";n("88ca")},"2fe3":function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var s=n("e760"),a=n("4c8d");function i(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(s["a"])(a["q"],e,t)}},"32bb":function(t,e,n){"use strict";n.d(e,"b",(function(){return i})),n.d(e,"a",(function(){return o}));var s=n("e760"),a=n("4c8d");function i(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(s["a"])(a["o"],e,t)}function o(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(s["a"])(a["i"],e,t)}},3828:function(t,e,n){"use strict";var s=n("73ad"),a=n("a402"),i=n("b203"),o=n("b13f"),r=n("fd33"),c=n("a20b"),l=n("4c60"),u=n("a851"),m=n("204f"),d=n("2532").f,g=n("b32c").f,v=n("0fe9").f,f=n("1054"),h=n("4bcb").trim,p="Number",b=a[p],y=b.prototype,_=function(t){var e=u(t,"number");return"bigint"===typeof e?e:C(e)},C=function(t){var e,n,s,a,i,o,r,c,m=u(t,"number");if(l(m))throw TypeError("Cannot convert a Symbol value to a number");if("string"==typeof m&&m.length>2)if(m=h(m),e=m.charCodeAt(0),43===e||45===e){if(n=m.charCodeAt(2),88===n||120===n)return NaN}else if(48===e){switch(m.charCodeAt(1)){case 66:case 98:s=2,a=49;break;case 79:case 111:s=8,a=55;break;default:return+m}for(i=m.slice(2),o=i.length,r=0;r<o;r++)if(c=i.charCodeAt(r),c<48||c>a)return NaN;return parseInt(i,s)}return+m};if(i(p,!b(" 0o1")||!b("0b1")||b("+0x1"))){for(var S,N=function(t){var e=arguments.length<1?0:b(_(t)),n=this;return n instanceof N&&m((function(){f(n)}))?c(Object(e),n,N):e},I=s?d(b):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,isFinite,isInteger,isNaN,isSafeInteger,parseFloat,parseInt,fromString,range".split(","),w=0;I.length>w;w++)r(b,S=I[w])&&!r(N,S)&&v(N,S,g(b,S));N.prototype=y,y.constructor=N,o(a,p,N)}},"3c62":function(t,e,n){},"49bb":function(t,e,n){"use strict";n("d158")},"4bcb":function(t,e,n){var s=n("c499"),a=n("69a8"),i=n("f8bc"),o="["+i+"]",r=RegExp("^"+o+o+"*"),c=RegExp(o+o+"*$"),l=function(t){return function(e){var n=a(s(e));return 1&t&&(n=n.replace(r,"")),2&t&&(n=n.replace(c,"")),n}};t.exports={start:l(1),end:l(2),trim:l(3)}},5534:function(t,e,n){"use strict";n("a44d")},"652a":function(t,e,n){"use strict";var s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"comment"},[n("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.avatarUrl,expression:"avatarUrl"}],attrs:{alt:""}}),n("div",{staticClass:"content"},[n("div",{staticClass:"left"},[n("div",{staticClass:"nickName"},[t._v(t._s(t.nickname))]),n("div",{staticClass:"text"},[t._v(" "+t._s(t.content))])]),n("div",{staticClass:"time"},[t._v(" "+t._s(t.time))])])])},a=[],i={name:"comment",props:{avatarUrl:String,nickname:String,content:String,time:String},methods:{}},o=i,r=(n("5534"),n("cba8")),c=Object(r["a"])(o,s,a,!1,null,null,null);e["a"]=c.exports},"88ca":function(t,e,n){},"8bdb":function(t,e,n){"use strict";n("9f96")},"8e8b":function(t,e,n){"use strict";n.r(e);var s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"playlist"}},[n("div",{staticClass:"music-container"},[n("div",{staticClass:"playlist-container"},[n("div",{staticClass:"playlist-header"},[n("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.playListDetail.coverImgUrl,expression:"playListDetail.coverImgUrl"}],attrs:{alt:""}}),n("div",{staticClass:"info"},[n("div",{staticClass:"name"},[t._v(t._s(t.playListDetail.name))]),t.btnFlag?n("div",{staticClass:"btn-group"},[n("div",{staticClass:"btn"},[n("div",{staticClass:"btn_mask"},[t._v("播放量")]),t._v(" "+t._s(t.playListDetail.playCount)+" ")]),n("div",{staticClass:"btn"},[n("div",{staticClass:"btn_mask"},[t._v("发表时间")]),t._v(" "+t._s(t.playListDetail.createTime)+" ")]),n("div",{staticClass:"btn"},[n("div",{staticClass:"btn_mask"},[t._v("收藏者数量")]),t._v(" "+t._s(t.playListDetail.subscribedCount)+" ")]),n("div",{staticClass:"btn play",on:{click:t.playAll}},[t._v("播放全部")])]):t._e(),n("div",{staticClass:"description"},[t._v(t._s(t.playListDetail.description))])])]),n("div",{staticClass:"playlist-nav"},[n("div",{class:["playlist-name","nav-item",1==t.type?"active":""],on:{click:function(e){t.type=1}}},[t._v("歌单（"+t._s(t.playListDetail.trackCount)+"）")]),n("div",{class:["commit","nav-item",2==t.type?"active":""],on:{click:function(e){t.type=2}}},[t._v("评论（"+t._s(t.playListDetail.commentCount)+"）")]),n("div",{class:["sub","nav-item",3==t.type?"active":""],on:{click:function(e){t.type=3}}},[t._v("收藏者（"+t._s(t.playListDetail.subscribedCount)+"）")])]),n("div",{class:["content-container",1==t.type?"isscroll":""]},[n("song-list",{directives:[{name:"show",rawName:"v-show",value:1==t.type,expression:"type==1"}],attrs:{trackIds:t.trackIds,trackCount:t.playListDetail.trackCount,scroll:t.scroll},on:{play:t.play}}),n("song-comment-list",{directives:[{name:"show",rawName:"v-show",value:2==t.type,expression:"type==2"}],attrs:{id:t.id,total:t.playListDetail.commentCount}}),n("sub-list",{directives:[{name:"show",rawName:"v-show",value:3==t.type,expression:"type==3"}],attrs:{id:t.id}})],1)])]),n("transition",{attrs:{name:"prograss"}},[n("music-prograss",{directives:[{name:"show",rawName:"v-show",value:t.musicPrograss,expression:"musicPrograss"}],staticClass:"music-prograss"})],1)],1)},a=[],i=n("ca85"),o=n("7a1c"),r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"songList"}},[t._m(0),n("div",{staticClass:"song-container"},t._l(t.songs,(function(e,s){return n("song-item",{key:s,attrs:{index:s,songId:e.id,alId:e.al.id,arId:e.ar[0].id,songName:e.name,alName:e.al.name,arName:e.ar[0].name,formatdt:e.format_dt,dt:e.dt},on:{play:t.play}})})),1)])},c=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"song-header"},[n("div",{staticClass:"id nav"},[t._v("序号")]),n("div",{staticClass:"name nav"},[t._v("歌名")]),n("div",{staticClass:"songer nav"},[t._v("歌手")]),n("div",{staticClass:"time nav"},[t._v("时长")]),n("div",{staticClass:"album nav"},[t._v("专辑")])])}],l=(n("3828"),n("aa0c"),n("bbb8"),n("4789"),n("b8eb")),u={name:"songList",components:{songItem:l["a"]},props:{trackIds:Array,trackCount:Number,scroll:Number},data:function(){return{songs:[],songNum:40,song_page:0,currentShowNum:0}},watch:{trackIds:function(){var t=this.disposeId();this.getsongdetail(t)},songs:function(){this.songs.forEach((function(t,e,n){var s=o["a"]._msTos(t.dt);n[e].format_dt=s}))},scroll:function(){this.currentShowNum<this.trackCount&&this.loadmove()}},methods:{disposeId:function(){var t=this.song_page*this.songNum,e=t+this.songNum;e=e>=this.trackCount?this.trackCount:e;var n=this.trackIds.slice(t,e),s=o["a"]._arrToString(n);return s},getsongdetail:function(t){var e=this;Object(i["h"])(this,{ids:t}).then((function(t){e.songs=e.songs.concat(t.songs),e.song_page++,e.currentShowNum=e.songs.length}))},loadmove:function(){var t=this.disposeId();this.getsongdetail(t)},play:function(t,e,n){this.$emit("play",t,e,n)}}},m=u,d=(n("05d7"),n("cba8")),g=Object(d["a"])(m,r,c,!1,null,null,null),v=g.exports,f=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"commentList"}},[n("comment-input",{attrs:{count:t.total}}),t._l(t.commentList,(function(t,e){return n("comment",{key:e,staticClass:"item",attrs:{avatarUrl:t.user.avatarUrl,nickname:t.user.nickname,content:t.content,time:t.time}})})),t.pagflag?n("div",{staticClass:"pagination"},[n("el-pagination",{attrs:{background:!0,layout:"total, sizes, prev, pager, next ,jumper","page-size":t.commentNum,"page-sizes":[5,10,20],total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1):t._e()],2)},h=[],p=n("32bb"),b=n("abb2"),y=n("652a"),_={name:"commentList",components:{commentInput:b["a"],comment:y["a"]},props:{id:String,total:Number},data:function(){return{pagflag:!1,commentList:[],commentNum:10,commentPage:0}},watch:{commentList:function(){this.commentList.forEach((function(t,e,n){var s=o["a"]._tranDate(t.time);n[e].time=s})),this.pagflag=!0}},created:function(){this.getcomment()},methods:{getcomment:function(){var t,e=this;t=0==this.commentPage?this.commentNum*this.commentPage:this.commentNum*(this.commentPage-1),Object(p["b"])(this,{id:this.id,limit:this.commentNum,offset:t}).then((function(t){e.commentList=t.comments,e.commentPage++}))},handleSizeChange:function(t){this.commentNum=t,this.getcomment()},handleCurrentChange:function(t){console.log(t),this.commentPage=t,this.getcomment()}}},C=_,S=(n("154b"),Object(d["a"])(C,f,h,!1,null,null,null)),N=S.exports,I=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"subList"}},t._l(t.subList,(function(e,s){return n("div",{key:s,staticClass:"item"},[n("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.avatarUrl,expression:"item.avatarUrl"}],attrs:{alt:""}}),n("div",{staticClass:"nickName"},[t._v(t._s(e.nickname))])])})),0)},w=[],L={name:"subList",props:{id:String},data:function(){return{subList:[],subNum:24}},created:function(){this.getSubscribers()},methods:{getSubscribers:function(){var t=this;Object(i["g"])(this,{id:this.id,limit:this.subNum}).then((function(e){t.subList=e.subscribers}))}}},k=L,O=(n("ea70"),Object(d["a"])(k,I,w,!1,null,null,null)),j=O.exports,$=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"music-prograss"}},[n("div",{staticClass:"left"},[n("div",{staticClass:"iconfont item icon-shangyishouge"}),n("div",{class:["item","iconfont",t.play?"icon-zanting":"icon-bofang"],on:{click:t.isplay}}),n("div",{staticClass:"iconfont item icon-kuaijin"})]),n("div",{staticClass:"song"},[n("div",{staticClass:"name"},[t._v(t._s(t.playSongname))]),n("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.songUrl,expression:"songUrl"}],attrs:{alt:""}})]),n("div",{staticClass:"right"},[n("div",{staticClass:"prograss-container"},[n("div",{staticClass:"current-time"}),n("div",{staticClass:"bar",on:{mousedown:t.barDown}})]),n("div",{staticClass:"time"},[t._v(t._s(Math.floor(t.songTime/6e4)+":"+Math.ceil(t.songTime%6e4/1e3)))])]),n("audio",{attrs:{src:t.audioUrl}})])},D=[],x=n("2fe3"),T={name:"prograss",data:function(){return{down:!1,play:!1,audioUrl:"",prograssDistance:0,currentDistance:0,timeStamp:0,audio:this.$store.state.audio,songUrl:"",x:0,playSongId:0,playSongname:"",songTime:0}},watch:{"$store.state.play":function(){var t=document.querySelector("audio");this.$store.state.play?(t.play(),this.play=!0):(t.pause(),this.play=!1)},timeStamp:function(){var t=this.timeStamp*(this.prograssDistance/this.songTime);document.querySelector(".bar").style.left=t+"px",document.querySelector(".current-time").style.width=t+"px",this.x=t},"$store.state.musicLoading":function(){this.prograssInit(),this.getStorage(),this.getsongUrl(),this.getSongImg()}},mounted:function(){window.localStorage.getItem("currentPlay")&&(this.getStorage(),this.prograssInit(),this.getsongUrl(),this.getSongImg(),this.$store.dispatch("saveMusicPrograss",!0))},methods:{getStorage:function(){var t=JSON.parse(window.localStorage.getItem("currentPlay"));this.playSongId=t.playSongId,this.playSongname=t.playSongname,this.songTime=t.songTime},currentTime:function(){var t=document.querySelector("audio"),e=this.currentDistance*(this.songTime/this.prograssDistance)/1e3;t.currentTime=e,this.$store.dispatch("savePlay",!0)},prograssInit:function(){var t=this;this.prograssDistance=document.querySelector(".prograss-container").offsetWidth-document.querySelector(".bar").offsetWidth,document.onmousemove=function(e){if(t.down){var n=e.pageX,s=document.querySelector(".bar"),a=document.querySelector(".prograss-container"),i=document.querySelector(".current-time"),o=document.querySelector("#music-prograss").offsetLeft,r=a.offsetLeft,c=a.offsetWidth,l=s.offsetWidth,u=n-r-o-l/2;u=u<0?0:u,u=u>c-l?c-l:u,s.style.left=u+"px",i.style.width=u+"px",t.currentDistance=u}},document.onmouseup=function(){t.down&&(t.down=!1,t.currentTime())}},audioInit:function(){var t=this,e=document.querySelector("audio");e.addEventListener("timeupdate",(function(){var n=1e3*e.currentTime;t.timeStamp=n})),e.addEventListener("ended",(function(){t.$store.dispatch("saveMusicPrograss",!1),console.log("音频播放结束"),t.timeStamp=t.songTime,t.songId="",t.songName="",t.songTime=""}))},barDown:function(){this.down=!0,this.$store.dispatch("savePlay",!1)},getsongUrl:function(){var t=this;this.$store.dispatch("savePlay",!1),this.timeStamp=0,Object(i["i"])(this,{id:this.playSongId}).then((function(e){t.audioUrl=e.data[0].url,t.audioInit()})).catch((function(t){console.log(t)}))},getSongImg:function(){var t=this;Object(x["a"])(this,{keywords:this.playSongname}).then((function(e){t.songUrl=e.result.songs[0].al.picUrl})).catch((function(t){console.log(t)}))},isplay:function(){var t=this.$store.state.play;this.$store.dispatch("savePlay",!t)},beforeDestroy:function(){this.$store.dispatch("savePlay",!1)}}},E=T,P=(n("d9a1"),Object(d["a"])(E,$,D,!1,null,null,null)),U=P.exports,z={name:"playlist",components:{songList:v,songCommentList:N,subList:j,musicPrograss:U},data:function(){return{scrollObj:[],id:this.$route.query.id,type:1,trackIds:[],playListDetail:{},scroll:1,btnFlag:!1,playSongId:0,playSongname:"",songTime:0,musicPrograss:this.$store.state.musicPrograss}},created:function(){this.getsong()},watch:{playListDetail:function(){this.playListDetail.playCount=o["a"]._tranNumber(this.playListDetail.playCount),this.playListDetail.createTime=o["a"]._tranDate(this.playListDetail.createTime),this.btnFlag=!0},type:function(){1!=this.type?this.$store.dispatch("saveMusicPrograss",!1):(window.localStorage.getItem("currentPlay")&&this.$store.dispatch("saveMusicPrograss",!0),this.$store.dispatch("saveMusicLoading",!1))},"$store.state.musicPrograss":function(){this.musicPrograss=this.$store.state.musicPrograss}},mounted:function(){this.init()},methods:{init:function(){var t=this;document.documentElement.scrollTop=0,1==this.type&&(this.scrollObj=document.querySelector(".content-container"),this.scrollObj.onscroll=function(){var e=t.scrollObj.scrollHeight||t.scrollObj.scrollHeight,n=t.scrollObj.clientHeight,s=t.scrollObj.scrollTop;if(n+Math.ceil(s)==e){var a=Math.random();a=a==t.scroll?a+1:a,t.scroll=a}})},getsong:function(){var t=this,e={id:this.id};Object(i["f"])(this,e).then((function(e){t.playListDetail=e.playlist,t.trackIds=e.playlist.trackIds})).catch((function(t){console.log("获取歌单详情出现错误",t)}))},playAll:function(){var t=(new Date).getTime();this.$router.push({path:"/song/".concat(t)}),window.localStorage.setItem("playList",JSON.stringify(this.trackIds)),window.localStorage.setItem("playListCover",this.playListDetail.coverImgUrl)},play:function(t,e,n){var s=this;Object(i["b"])(this,{id:t}).then((function(a){var i=a.success;if(i){var o={playSongId:t,playSongname:e,songTime:n};window.localStorage.setItem("currentPlay",JSON.stringify(o)),s.$store.dispatch("saveMusicLoading",Math.random()),s.$store.dispatch("saveMusicPrograss",!0)}})).catch((function(){s.$message({showClose:!0,message:"亲爱的,暂无版权",type:"error"}),s.$store.dispatch("saveLoadingFlag",!1)}))}},beforeDestroy:function(){this.scrollObj.onscroll=null}},M=z,q=(n("49bb"),Object(d["a"])(M,s,a,!1,null,null,null));e["default"]=q.exports},9473:function(t,e,n){},"9f96":function(t,e,n){},a20b:function(t,e,n){var s=n("f6cc"),a=n("ef68"),i=n("54fa");t.exports=function(t,e,n){var o,r;return i&&s(o=e.constructor)&&o!==n&&a(r=o.prototype)&&r!==n.prototype&&i(t,r),t}},a44d:function(t,e,n){},abb2:function(t,e,n){"use strict";var s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"comment-input"},[n("div",{staticClass:"comment-header"},[n("span",[t._v("评论")]),n("span",[t._v("共有"+t._s(t.count)+"条评论")])]),t._m(0)])},a=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"content"},[n("textarea",{attrs:{name:"",id:"",rows:"4",placeholder:"说说您的想法吧"}}),n("button",{staticClass:"btn"},[t._v("发表评论")])])}],i=(n("3828"),{name:"commentInput",props:{count:Number}}),o=i,r=(n("8bdb"),n("cba8")),c=Object(r["a"])(o,s,a,!1,null,null,null);e["a"]=c.exports},b8eb:function(t,e,n){"use strict";var s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"song"}},[n("div",{staticClass:"id item-d"},[t._v(t._s(t.index+1))]),n("div",{staticClass:"name item-d hover",on:{click:function(e){return t.goSong(t.songId,t.songName,t.dt)}}},[t._v(t._s(t.songName))]),n("div",{staticClass:"songer item-d hover",on:{click:function(e){return t.goSingerDetail(t.arId,t.arName)}}},[t._v(t._s(t.arName))]),n("div",{staticClass:"time item-d"},[t._v(t._s(t.formatdt))]),n("div",{staticClass:"album item-d hover",on:{click:function(e){return t.album(t.alId)}}},[t._v(t._s(t.alName))])])},a=[],i=(n("3828"),{name:"song",props:{index:Number,songId:Number,alId:Number,arId:Number,songName:String,alName:String,arName:String,formatdt:String,dt:Number},methods:{goSong:function(t,e,n){this.$emit("play",t,e,n)},goSingerDetail:function(t,e){this.$router.push({path:"/singerDetail/".concat((new Date).getTime()),query:{id:t,name:e}})},album:function(t){this.$message({showClose:!0,message:"链接：https://music.163.com/#/album?id="+t,type:"success"})}}}),o=i,r=(n("debe"),n("cba8")),c=Object(r["a"])(o,s,a,!1,null,null,null);e["a"]=c.exports},ca85:function(t,e,n){"use strict";n.d(e,"d",(function(){return i})),n.d(e,"k",(function(){return o})),n.d(e,"c",(function(){return r})),n.d(e,"j",(function(){return c})),n.d(e,"f",(function(){return l})),n.d(e,"h",(function(){return u})),n.d(e,"g",(function(){return m})),n.d(e,"a",(function(){return d})),n.d(e,"i",(function(){return g})),n.d(e,"e",(function(){return v})),n.d(e,"b",(function(){return f}));var s=n("e760"),a=n("4c8d");function i(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(s["a"])(a["g"],e,t)}function o(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(s["a"])(a["z"],e,t)}function r(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(s["a"])(a["b"],e,t)}function c(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(s["a"])(a["c"],e,t)}function l(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(s["a"])(a["n"],e,t)}function u(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(s["a"])(a["w"],e,t)}function m(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(s["a"])(a["p"],e,t)}function d(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(s["a"])(a["e"],e,t)}function g(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(s["a"])(a["x"],e,t)}function v(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(s["a"])(a["h"],e,t)}function f(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(s["a"])(a["a"],e,t)}},d158:function(t,e,n){},d9a1:function(t,e,n){"use strict";n("3c62")},debe:function(t,e,n){"use strict";n("f215")},ea70:function(t,e,n){"use strict";n("fc23")},f215:function(t,e,n){},f8bc:function(t,e){t.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},fc23:function(t,e,n){}}]);
//# sourceMappingURL=chunk-52738226.55439958.js.map