(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-52738226"],{"05d7":function(t,n,e){"use strict";e("9473")},1054:function(t,n){var e=1..valueOf;t.exports=function(t){return e.call(t)}},"154b":function(t,n,e){"use strict";e("88ca")},"2fe3":function(t,n,e){"use strict";e.d(n,"a",(function(){return a}));var s=e("e760"),i=e("4c8d");function a(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(s["a"])(i["q"],n,t)}},"32bb":function(t,n,e){"use strict";e.d(n,"b",(function(){return a})),e.d(n,"a",(function(){return o}));var s=e("e760"),i=e("4c8d");function a(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(s["a"])(i["o"],n,t)}function o(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(s["a"])(i["i"],n,t)}},3828:function(t,n,e){"use strict";var s=e("73ad"),i=e("a402"),a=e("b203"),o=e("b13f"),r=e("fd33"),c=e("a20b"),l=e("4c60"),u=e("a851"),m=e("204f"),d=e("2532").f,g=e("b32c").f,v=e("0fe9").f,f=e("1054"),h=e("4bcb").trim,p="Number",b=i[p],y=b.prototype,_=function(t){var n=u(t,"number");return"bigint"===typeof n?n:C(n)},C=function(t){var n,e,s,i,a,o,r,c,m=u(t,"number");if(l(m))throw TypeError("Cannot convert a Symbol value to a number");if("string"==typeof m&&m.length>2)if(m=h(m),n=m.charCodeAt(0),43===n||45===n){if(e=m.charCodeAt(2),88===e||120===e)return NaN}else if(48===n){switch(m.charCodeAt(1)){case 66:case 98:s=2,i=49;break;case 79:case 111:s=8,i=55;break;default:return+m}for(a=m.slice(2),o=a.length,r=0;r<o;r++)if(c=a.charCodeAt(r),c<48||c>i)return NaN;return parseInt(a,s)}return+m};if(a(p,!b(" 0o1")||!b("0b1")||b("+0x1"))){for(var S,N=function(t){var n=arguments.length<1?0:b(_(t)),e=this;return e instanceof N&&m((function(){f(e)}))?c(Object(n),e,N):n},I=s?d(b):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,isFinite,isInteger,isNaN,isSafeInteger,parseFloat,parseInt,fromString,range".split(","),w=0;I.length>w;w++)r(b,S=I[w])&&!r(N,S)&&v(N,S,g(b,S));N.prototype=y,y.constructor=N,o(i,p,N)}},"3c62":function(t,n,e){},"49bb":function(t,n,e){"use strict";e("d158")},"4bcb":function(t,n,e){var s=e("c499"),i=e("69a8"),a=e("f8bc"),o="["+a+"]",r=RegExp("^"+o+o+"*"),c=RegExp(o+o+"*$"),l=function(t){return function(n){var e=i(s(n));return 1&t&&(e=e.replace(r,"")),2&t&&(e=e.replace(c,"")),e}};t.exports={start:l(1),end:l(2),trim:l(3)}},5534:function(t,n,e){"use strict";e("a44d")},"652a":function(t,n,e){"use strict";var s=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticClass:"comment"},[e("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.avatarUrl,expression:"avatarUrl"}],attrs:{alt:""}}),e("div",{staticClass:"content"},[e("div",{staticClass:"left"},[e("div",{staticClass:"nickName"},[t._v(t._s(t.nickname))]),e("div",{staticClass:"text"},[t._v(" "+t._s(t.content))])]),e("div",{staticClass:"time"},[t._v(" "+t._s(t.time))])])])},i=[],a={name:"comment",props:{avatarUrl:String,nickname:String,content:String,time:String},methods:{}},o=a,r=(e("5534"),e("cba8")),c=Object(r["a"])(o,s,i,!1,null,null,null);n["a"]=c.exports},"88ca":function(t,n,e){},"8bdb":function(t,n,e){"use strict";e("9f96")},"8e8b":function(t,n,e){"use strict";e.r(n);var s=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{attrs:{id:"playlist"}},[e("div",{staticClass:"music-container"},[e("div",{staticClass:"playlist-container"},[e("div",{staticClass:"playlist-header"},[e("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.playListDetail.coverImgUrl,expression:"playListDetail.coverImgUrl"}],attrs:{alt:""}}),e("div",{staticClass:"info"},[e("div",{staticClass:"name"},[t._v(t._s(t.playListDetail.name))]),t.btnFlag?e("div",{staticClass:"btn-group"},[e("div",{staticClass:"btn"},[e("div",{staticClass:"btn_mask"},[t._v("播放量")]),t._v(" "+t._s(t.playListDetail.playCount)+" ")]),e("div",{staticClass:"btn"},[e("div",{staticClass:"btn_mask"},[t._v("发表时间")]),t._v(" "+t._s(t.playListDetail.createTime)+" ")]),e("div",{staticClass:"btn"},[e("div",{staticClass:"btn_mask"},[t._v("收藏者数量")]),t._v(" "+t._s(t.playListDetail.subscribedCount)+" ")]),e("div",{staticClass:"btn play",on:{click:t.playAll}},[t._v("播放全部")])]):t._e(),e("div",{staticClass:"description"},[t._v(t._s(t.playListDetail.description))])])]),e("div",{staticClass:"playlist-nav"},[e("div",{class:["playlist-name","nav-item",1==t.type?"active":""],on:{click:function(n){t.type=1}}},[t._v("歌单（"+t._s(t.playListDetail.trackCount)+"）")]),e("div",{class:["commit","nav-item",2==t.type?"active":""],on:{click:function(n){t.type=2}}},[t._v("评论（"+t._s(t.playListDetail.commentCount)+"）")]),e("div",{class:["sub","nav-item",3==t.type?"active":""],on:{click:function(n){t.type=3}}},[t._v("收藏者（"+t._s(t.playListDetail.subscribedCount)+"）")])]),e("div",{class:["content-container",1==t.type?"isscroll":""]},[e("song-list",{directives:[{name:"show",rawName:"v-show",value:1==t.type,expression:"type==1"}],attrs:{trackIds:t.trackIds,trackCount:t.playListDetail.trackCount,scroll:t.scroll},on:{play:t.play}}),e("song-comment-list",{directives:[{name:"show",rawName:"v-show",value:2==t.type,expression:"type==2"}],attrs:{id:t.id,total:t.playListDetail.commentCount}}),e("sub-list",{directives:[{name:"show",rawName:"v-show",value:3==t.type,expression:"type==3"}],attrs:{id:t.id}})],1)])]),e("transition",{attrs:{name:"prograss"}},[e("music-prograss",{directives:[{name:"show",rawName:"v-show",value:t.musicPrograss,expression:"musicPrograss"}],staticClass:"music-prograss"})],1)],1)},i=[],a=e("ca85"),o=e("7a1c"),r=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{attrs:{id:"songList"}},[t._m(0),e("div",{staticClass:"song-container"},t._l(t.songs,(function(n,s){return e("song-item",{key:s,attrs:{index:s,songId:n.id,alId:n.al.id,arId:n.ar[0].id,songName:n.name,alName:n.al.name,arName:n.ar[0].name,formatdt:n.format_dt,dt:n.dt},on:{play:t.play}})})),1)])},c=[function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticClass:"song-header"},[e("div",{staticClass:"id nav"},[t._v("序号")]),e("div",{staticClass:"name nav"},[t._v("歌名")]),e("div",{staticClass:"songer nav"},[t._v("歌手")]),e("div",{staticClass:"time nav"},[t._v("时长")]),e("div",{staticClass:"album nav"},[t._v("专辑")])])}],l=(e("3828"),e("aa0c"),e("bbb8"),e("4789"),e("b8eb")),u={name:"songList",components:{songItem:l["a"]},props:{trackIds:Array,trackCount:Number,scroll:Number},data:function(){return{songs:[],songNum:40,song_page:0,currentShowNum:0}},watch:{trackIds:function(){var t=this.disposeId();this.getsongdetail(t)},songs:function(){this.songs.forEach((function(t,n,e){var s=o["a"]._msTos(t.dt);e[n].format_dt=s}))},scroll:function(){this.currentShowNum<this.trackCount&&this.loadmove()}},methods:{disposeId:function(){var t=this.song_page*this.songNum,n=t+this.songNum;n=n>=this.trackCount?this.trackCount:n,n-t<this.songNum?this.isLoadMove=!1:this.isLoadMove=!0;var e=this.trackIds.slice(t,n),s=o["a"]._arrToString(e);return s},getsongdetail:function(t){var n=this;Object(a["h"])(this,{ids:t}).then((function(t){n.songs=n.songs.concat(t.songs),n.song_page++,n.currentShowNum=n.songs.length}))},loadmove:function(){var t=this.disposeId();this.getsongdetail(t)},play:function(t,n,e){this.$emit("play",t,n,e)}}},m=u,d=(e("05d7"),e("cba8")),g=Object(d["a"])(m,r,c,!1,null,null,null),v=g.exports,f=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{attrs:{id:"commentList"}},[e("comment-input",{attrs:{count:t.total}}),t._l(t.commentList,(function(t,n){return e("comment",{key:n,staticClass:"item",attrs:{avatarUrl:t.user.avatarUrl,nickname:t.user.nickname,content:t.content,time:t.time}})})),t.pagflag?e("div",{staticClass:"pagination"},[e("el-pagination",{attrs:{background:!0,layout:"total, sizes, prev, pager, next ,jumper","page-size":t.commentNum,"page-sizes":[5,10,20],total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1):t._e()],2)},h=[],p=e("32bb"),b=e("abb2"),y=e("652a"),_={name:"commentList",components:{commentInput:b["a"],comment:y["a"]},props:{id:String,total:Number},data:function(){return{pagflag:!1,commentList:[],commentNum:10,commentPage:0}},watch:{commentList:function(){this.commentList.forEach((function(t,n,e){var s=o["a"]._tranDate(t.time);e[n].time=s})),this.pagflag=!0}},created:function(){this.getcomment()},methods:{getcomment:function(){var t,n=this;t=0==this.commentPage?this.commentNum*this.commentPage:this.commentNum*(this.commentPage-1),Object(p["b"])(this,{id:this.id,limit:this.commentNum,offset:t}).then((function(t){n.commentList=t.comments,n.commentPage++}))},handleSizeChange:function(t){this.commentNum=t,this.getcomment()},handleCurrentChange:function(t){console.log(t),this.commentPage=t,this.getcomment()}}},C=_,S=(e("154b"),Object(d["a"])(C,f,h,!1,null,null,null)),N=S.exports,I=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{attrs:{id:"subList"}},t._l(t.subList,(function(n,s){return e("div",{key:s,staticClass:"item"},[e("img",{directives:[{name:"lazy",rawName:"v-lazy",value:n.avatarUrl,expression:"item.avatarUrl"}],attrs:{alt:""}}),e("div",{staticClass:"nickName"},[t._v(t._s(n.nickname))])])})),0)},w=[],L={name:"subList",props:{id:String},data:function(){return{subList:[],subNum:24}},created:function(){this.getSubscribers()},methods:{getSubscribers:function(){var t=this;Object(a["g"])(this,{id:this.id,limit:this.subNum}).then((function(n){t.subList=n.subscribers}))}}},k=L,O=(e("ea70"),Object(d["a"])(k,I,w,!1,null,null,null)),j=O.exports,D=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{attrs:{id:"music-prograss"}},[e("div",{staticClass:"left"},[e("div",{staticClass:"iconfont item icon-shangyishouge"}),e("div",{class:["item","iconfont",t.play?"icon-zanting":"icon-bofang"],on:{click:function(n){t.play=!t.play}}}),e("div",{staticClass:"iconfont item icon-kuaijin"})]),e("div",{staticClass:"song"},[e("div",{staticClass:"name"},[t._v(t._s(t.playSongname))]),e("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.songUrl,expression:"songUrl"}],attrs:{alt:""}})]),e("div",{staticClass:"right"},[e("div",{staticClass:"prograss-container"},[e("div",{staticClass:"current-time"}),e("div",{staticClass:"bar",on:{mousedown:t.barDown}})]),e("div",{staticClass:"time"},[t._v(t._s(Math.floor(t.songTime/6e4)+":"+Math.ceil(t.songTime%6e4/1e3)))])])])},x=[],E=e("2fe3"),$={name:"prograss",data:function(){return{down:!1,play:!1,audioUrl:"",prograssDistance:0,currentDistance:0,timeStamp:0,audio:[],songUrl:"",x:0,playSongId:0,playSongname:"",songTime:0}},watch:{play:function(){this.play?this.audio.play():this.audio.pause()},timeStamp:function(){var t=this.timeStamp*(this.prograssDistance/this.songTime);document.querySelector(".bar").style.left=t+"px",document.querySelector(".current-time").style.width=t+"px",this.x=t},"$store.state.musicLoading":function(){this.$store.state.musicLoading&&(this.init(),this.getStorage(),this.prograssInit(),this.getsongUrl(),this.getSongImg())}},mounted:function(){this.$store.state.musicPrograss&&(this.init(),this.getStorage(),this.prograssInit(),this.getsongUrl(),this.getSongImg())},methods:{getStorage:function(){var t=JSON.parse(window.localStorage.getItem("currentPlay"));this.playSongId=t.playSongId,this.playSongname=t.playSongname,this.songTime=t.songTime},init:function(){this.audio=document.createElement("audio")},currentTime:function(){var t=this.currentDistance*(this.songTime/this.prograssDistance)/1e3;this.audio.currentTime=t,this.play=!0},prograssInit:function(){var t=this;this.prograssDistance=document.querySelector(".prograss-container").offsetWidth-document.querySelector(".bar").offsetWidth,document.onmousemove=function(n){if(t.down){var e=n.pageX,s=document.querySelector(".bar"),i=document.querySelector(".prograss-container"),a=document.querySelector(".current-time"),o=document.querySelector("#music-prograss").offsetLeft,r=i.offsetLeft,c=i.offsetWidth,l=s.offsetWidth,u=e-r-o-l/2;u=u<0?0:u,u=u>c-l?c-l:u,s.style.left=u+"px",a.style.width=u+"px",t.currentDistance=u}},document.onmouseup=function(){t.down&&(t.down=!1,t.currentTime())}},audioInit:function(){var t=this;this.audio.src=this.audioUrl,this.play=!0,this.audio.addEventListener("timeupdate",(function(){var n=1e3*t.audio.currentTime;t.timeStamp=n})),this.audio.addEventListener("ended",(function(){t.$store.dispatch("saveMusicPrograss",!1),console.log("音频播放结束"),t.songId="",t.songName="",t.songTime=""}))},barDown:function(){this.down=!0,this.play=!1},getsongUrl:function(){var t=this;this.play=!1,this.timeStamp=0,Object(a["i"])(this,{id:this.playSongId}).then((function(n){t.audioUrl=n.data[0].url,t.audioInit()})).catch((function(t){console.log(t)}))},getSongImg:function(){var t=this;Object(E["a"])(this,{keywords:this.playSongname}).then((function(n){t.songUrl=n.result.songs[0].al.picUrl})).catch((function(t){console.log(t)}))}}},T=$,P=(e("d9a1"),Object(d["a"])(T,D,x,!1,null,null,null)),U=P.exports,z={name:"playlist",components:{songList:v,songCommentList:N,subList:j,musicPrograss:U},data:function(){return{scrollObj:[],id:this.$route.query.id,type:1,trackIds:[],playListDetail:{},scroll:1,btnFlag:!1,playSongId:0,playSongname:"",songTime:0,musicPrograss:this.$store.state.musicPrograss}},created:function(){this.getsong()},watch:{playListDetail:function(){this.playListDetail.playCount=o["a"]._tranNumber(this.playListDetail.playCount),this.playListDetail.createTime=o["a"]._tranDate(this.playListDetail.createTime),this.btnFlag=!0},type:function(){1!=this.type?this.$store.dispatch("saveMusicPrograss",!1):(window.localStorage.getItem("currentPlay")&&this.$store.dispatch("saveMusicPrograss",!0),this.$store.dispatch("saveMusicLoading",!1))},"$store.state.musicPrograss":function(){this.musicPrograss=this.$store.state.musicPrograss}},mounted:function(){this.init()},methods:{init:function(){var t=this;document.documentElement.scrollTop=0,1==this.type&&(this.scrollObj=document.querySelector(".content-container"),this.scrollObj.onscroll=function(){var n=t.scrollObj.scrollHeight||t.scrollObj.scrollHeight,e=t.scrollObj.clientHeight,s=t.scrollObj.scrollTop;if(e+Math.ceil(s)==n){var i=Math.random();i=i==t.scroll?i+1:i,t.scroll=i}})},getsong:function(){var t=this,n={id:this.id};Object(a["f"])(this,n).then((function(n){t.playListDetail=n.playlist,t.trackIds=n.playlist.trackIds})).catch((function(t){console.log("获取歌单详情出现错误",t)}))},playAll:function(){var t=(new Date).getTime();this.$router.push({path:"/song/".concat(t)}),window.localStorage.setItem("playList",JSON.stringify(this.trackIds)),window.localStorage.setItem("playListCover",this.playListDetail.coverImgUrl)},play:function(t,n,e){var s=this;Object(a["b"])(this,{id:t}).then((function(i){var a=i.success;if(a){var o={playSongId:t,playSongname:n,songTime:e};window.localStorage.setItem("currentPlay",JSON.stringify(o)),s.$store.dispatch("saveMusicLoading",!0),s.$store.dispatch("saveMusicPrograss",!0)}})).catch((function(){s.$message({showClose:!0,message:"亲爱的,暂无版权",type:"error"}),s.$store.dispatch("saveLoadingFlag",!1)}))}},beforeDestroy:function(){this.scrollObj.onscroll=null}},M=z,A=(e("49bb"),Object(d["a"])(M,s,i,!1,null,null,null));n["default"]=A.exports},9473:function(t,n,e){},"9f96":function(t,n,e){},a20b:function(t,n,e){var s=e("f6cc"),i=e("ef68"),a=e("54fa");t.exports=function(t,n,e){var o,r;return a&&s(o=n.constructor)&&o!==e&&i(r=o.prototype)&&r!==e.prototype&&a(t,r),t}},a44d:function(t,n,e){},abb2:function(t,n,e){"use strict";var s=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticClass:"comment-input"},[e("div",{staticClass:"comment-header"},[e("span",[t._v("评论")]),e("span",[t._v("共有"+t._s(t.count)+"条评论")])]),t._m(0)])},i=[function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticClass:"content"},[e("textarea",{attrs:{name:"",id:"",rows:"4",placeholder:"说说您的想法吧"}}),e("button",{staticClass:"btn"},[t._v("发表评论")])])}],a=(e("3828"),{name:"commentInput",props:{count:Number}}),o=a,r=(e("8bdb"),e("cba8")),c=Object(r["a"])(o,s,i,!1,null,null,null);n["a"]=c.exports},b8eb:function(t,n,e){"use strict";var s=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{attrs:{id:"song"}},[e("div",{staticClass:"id item-d"},[t._v(t._s(t.index+1))]),e("div",{staticClass:"name item-d hover",on:{click:function(n){return t.goSong(t.songId,t.songName,t.dt)}}},[t._v(t._s(t.songName))]),e("div",{staticClass:"songer item-d hover",on:{click:function(n){return t.goSingerDetail(t.arId,t.arName)}}},[t._v(t._s(t.arName))]),e("div",{staticClass:"time item-d"},[t._v(t._s(t.formatdt))]),e("div",{staticClass:"album item-d hover",on:{click:function(n){return t.album(t.alId)}}},[t._v(t._s(t.alName))])])},i=[],a=(e("3828"),{name:"song",props:{index:Number,songId:Number,alId:Number,arId:Number,songName:String,alName:String,arName:String,formatdt:String,dt:Number},methods:{goSong:function(t,n,e){this.$emit("play",t,n,e)},goSingerDetail:function(t,n){var e=(new Date).getTime();this.$router.push({path:"/singerDetail/".concat(e),query:{id:t,name:n}})},album:function(t){this.$message({showClose:!0,message:"链接：https://music.163.com/#/album?id="+t,type:"success"})}}}),o=a,r=(e("debe"),e("cba8")),c=Object(r["a"])(o,s,i,!1,null,null,null);n["a"]=c.exports},ca85:function(t,n,e){"use strict";e.d(n,"d",(function(){return a})),e.d(n,"k",(function(){return o})),e.d(n,"c",(function(){return r})),e.d(n,"j",(function(){return c})),e.d(n,"f",(function(){return l})),e.d(n,"h",(function(){return u})),e.d(n,"g",(function(){return m})),e.d(n,"a",(function(){return d})),e.d(n,"i",(function(){return g})),e.d(n,"e",(function(){return v})),e.d(n,"b",(function(){return f}));var s=e("e760"),i=e("4c8d");function a(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(s["a"])(i["g"],n,t)}function o(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(s["a"])(i["z"],n,t)}function r(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(s["a"])(i["b"],n,t)}function c(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(s["a"])(i["c"],n,t)}function l(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(s["a"])(i["n"],n,t)}function u(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(s["a"])(i["w"],n,t)}function m(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(s["a"])(i["p"],n,t)}function d(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(s["a"])(i["e"],n,t)}function g(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(s["a"])(i["x"],n,t)}function v(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(s["a"])(i["h"],n,t)}function f(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(s["a"])(i["a"],n,t)}},d158:function(t,n,e){},d9a1:function(t,n,e){"use strict";e("3c62")},debe:function(t,n,e){"use strict";e("f215")},ea70:function(t,n,e){"use strict";e("fc23")},f215:function(t,n,e){},f8bc:function(t,n){t.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},fc23:function(t,n,e){}}]);
//# sourceMappingURL=chunk-52738226.ec9b0b13.js.map