{"version":3,"sources":["webpack:///./src/network/search/index.js","webpack:///./src/pages/Song.vue?3f88","webpack:///src/pages/Song.vue","webpack:///./src/pages/Song.vue?d12e","webpack:///./src/pages/Song.vue","webpack:///./src/network/song/index.js","webpack:///./node_modules/_core-js@3.18.3@core-js/modules/es.function.name.js","webpack:///./src/pages/Song.vue?596d"],"names":["req_search","context","params","require","search","render","_vm","this","_h","$createElement","_c","_self","staticClass","style","cover","_m","_l","item","index","key","class","item_index","_v","_s","name","directives","rawName","value","play","expression","attrs","on","$event","goSingerDetail","ar","id","format_dt","isplay","barDown","url","active","lrc","staticRenderFns","components","data","songUrl","songname","parseLyric","trackIds","songs","songNum","song_page","currentShowNum","down","prograssDistance","currentDistance","timeStamp","x","watch","getsongdetail","ids","forEach","arr","audio","console","log","document","querySelector","left","width","created","getTrackIds","getsongUrl","getlyric","mounted","methods","disposeId","end","trackCount","str","JSON","parse","window","localStorage","getItem","getSongImg","keywords","prograssInit","onmousemove","distance","bar","current","onmouseup","currentTime","audioInit","addEventListener","$router","push","path","query","reset","lrcContainer","top","beforeDestroy","component","req_introduce_playList","introduce_playList","req_update_playList_Tab","update_playList_type","req_disc","dvd","req_unipue","exclusive","req_playList_in_songAllid","playList_all_songId","req_song_detail","song_detail","req_playList_subscribers","playList_subscribers","req_All_topList","hotList","req_song_url","song_url","req_lyric","lyrics","req_checkMusic","checkMusic","DESCRIPTORS","FUNCTION_NAME_EXISTS","EXISTS","defineProperty","f","FunctionPrototype","Function","prototype","FunctionPrototypeToString","toString","nameRE","NAME","configurable","get","call","match","error"],"mappings":"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","file":"js/chunk-dc4a5c88.15a74948.js","sourcesContent":["import { require } from \"../require\";\r\nimport { search } from \"../url\";\r\n/**\r\n * 关键字查找\r\n */\r\nfunction req_search(context, params = {}) {\r\n     return require(search, params, context);\r\n}\r\n\r\n\r\nexport {\r\n    req_search,\r\n}","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"song\"},[_c('div',{staticClass:\"bgmask\"}),_c('div',{staticClass:\"bg\",style:({'background-image': 'url('+_vm.cover+')','background-color': 'rgb(255,255,255)'})}),_c('div',{staticClass:\"music-container\"},[_c('div',{staticClass:\"content\"},[_c('div',{staticClass:\"song-list\"},[_c('div',{staticClass:\"song-container\"},[_vm._m(0),_vm._l((_vm.songs),function(item,index){return _c('div',{key:index,staticClass:\"item\"},[_c('span',{class:['song-name',  _vm.item_index==index? 'song-active': '']},[_vm._v(\" \"+_vm._s(item.name)+\" \"),_c('img',{directives:[{name:\"show\",rawName:\"v-show\",value:(index==_vm.item_index && _vm.play),expression:\"index==item_index && play\"}],attrs:{\"src\":\"/img/loading-svg/loading-bars.svg\"}})]),_c('span',{staticClass:\"singer-name\",on:{\"click\":function($event){return _vm.goSingerDetail(item.ar[0].id, item.ar[0].name)}}},[_vm._v(_vm._s(item.ar[0].name))]),_c('span',{staticClass:\"time\"},[_vm._v(_vm._s(item.format_dt))])])})],2)]),_c('div',{staticClass:\"prograss\"},[_c('div',{staticClass:\"left\"},[_c('div',{staticClass:\"iconfont item icon-shangyishouge\",on:{\"click\":function($event){_vm.item_index--}}}),_c('div',{class:['item','iconfont',_vm.play? 'icon-zanting': 'icon-bofang'],on:{\"click\":_vm.isplay}}),_c('div',{staticClass:\"iconfont item icon-kuaijin\",on:{\"click\":function($event){_vm.item_index++}}})]),_c('div',{staticClass:\"prograss-container\"},[_c('div',{staticClass:\"current-time\"}),_c('div',{staticClass:\"bar\",on:{\"mousedown\":_vm.barDown}})]),_c('audio',{attrs:{\"src\":_vm.url}})])]),_c('div',{staticClass:\"aside\"},[_c('div',{staticClass:\"current-song\"},[_c('img',{directives:[{name:\"lazy\",rawName:\"v-lazy\",value:(_vm.songUrl),expression:\"songUrl\"}],class:[_vm.play? 'animation-rotate': '']})]),_c('div',{staticClass:\"lyric\"},[_c('div',{staticClass:\"lrc-container\"},_vm._l((_vm.parseLyric),function(item,index){return _c('span',{key:index,class:['lrc', index==_vm.active? 'active': '']},[_vm._v(_vm._s(item.lrc))])}),0)])])])])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"item\"},[_c('span',{staticClass:\"song-name\"},[_vm._v(\"歌名\")]),_c('span',{staticClass:\"singer-name\"},[_vm._v(\"歌手\")]),_c('span',{staticClass:\"time\"},[_vm._v(\"时长\")])])}]\n\nexport { render, staticRenderFns }","<!--\r\n * @Date: 2021-10-23 17:12:17\r\n * @Author: 浩\r\n * @LastEditors: 浩\r\n * @FilePath: \\music\\src\\pages\\Song.vue\r\n-->\r\n<template>\r\n  <div class=\"song\">\r\n    <!-- 遮罩层 -->\r\n    <div class=\"bgmask\"></div>\r\n    <!-- 背景图 -->\r\n    <div class=\"bg\" :style=\"{'background-image': 'url('+cover+')','background-color': 'rgb(255,255,255)'}\"></div>\r\n    <!-- 主体 -->\r\n    <div class=\"music-container\">\r\n         <div class=\"content\">\r\n           <div class=\"song-list\">\r\n             <div class=\"song-container\">\r\n                 <div class=\"item\">\r\n                   <span class=\"song-name\">歌名</span>\r\n                   <span class=\"singer-name\">歌手</span>\r\n                   <span class=\"time\">时长</span>\r\n                 </div>\r\n                 <div class=\"item\" v-for=\"(item, index) in songs\" :key=\"index\">\r\n                   <span :class=\"['song-name',  item_index==index? 'song-active': '']\">\r\n                     {{item.name}}\r\n                     <img src=\"/img/loading-svg/loading-bars.svg\" v-show=\"index==item_index && play\" />\r\n                   </span>\r\n                   <span class=\"singer-name\" @click=\"goSingerDetail(item.ar[0].id, item.ar[0].name)\">{{item.ar[0].name}}</span>\r\n                   <span class=\"time\">{{item.format_dt}}</span>\r\n                 </div>\r\n             </div>\r\n           </div>\r\n           <div class=\"prograss\">\r\n               <div class=\"left\">\r\n                  <div class=\"iconfont item icon-shangyishouge\" @click=\"item_index--\"></div>\r\n                  <div :class=\"['item','iconfont',play? 'icon-zanting': 'icon-bofang']\" @click=\"isplay\"></div>\r\n                  <div class=\"iconfont item icon-kuaijin\" @click=\"item_index++\"></div>\r\n               </div>\r\n               <div class=\"prograss-container\">\r\n                  <div class=\"current-time\"></div>\r\n                  <div class=\"bar\" @mousedown=\"barDown\"></div>\r\n               </div>\r\n               <audio :src=\"url\" ></audio>\r\n           </div>\r\n         </div>\r\n         <div class=\"aside\">\r\n           <div class=\"current-song\">\r\n             <img v-lazy=\"songUrl\" :class=\"[play? 'animation-rotate': '']\"/>\r\n           </div>\r\n           <div class=\"lyric\">\r\n               <div class=\"lrc-container\">\r\n                  <span v-for=\"(item, index) in parseLyric\" :key=\"index\" :class=\"['lrc', index==active? 'active': '']\">{{item.lrc}}</span>\r\n               </div>\r\n           </div>\r\n         </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n<script>\r\nimport {\r\n  req_lyric,\r\n  req_song_url,\r\n  req_song_detail,\r\n} from \"../network/song/index.js\";\r\nimport { req_search } from \"../network/search/index.js\";\r\nimport tools from \"../tools/formatData.js\";\r\nexport default {\r\n  name: \"song\",\r\n  components: {},\r\n  data() {\r\n    return {\r\n      item_index: 0,\r\n      // 当前播放的歌曲（默认第一首）\r\n      id: 0,\r\n      // 当前播放音频\r\n      url: \"\",\r\n      // 当前歌曲背景图\r\n      songUrl: \"\",\r\n      // 当前播放歌曲名字\r\n      songname: \"\",\r\n      // 歌单图片（背景图）\r\n      cover: \"\",\r\n      // 歌词处理后\r\n      parseLyric: [],\r\n      // 当前激活歌词\r\n      active: 0,\r\n      // 歌曲 id\r\n      trackIds: [],\r\n      // 歌曲列表\r\n      songs: [],\r\n      songNum: 20,\r\n      song_page: 0,\r\n      // 当前展示的条数\r\n      currentShowNum: 0,\r\n      \r\n      play: false,\r\n      down: false,\r\n    \r\n       // 初始进度条长度\r\n      prograssDistance: 0,\r\n      // 当前进度条滑动的距离\r\n      currentDistance: 0,\r\n      // 当前歌曲时间\r\n      timeStamp: 0,\r\n      // 实际滚动距离\r\n      x: 0,\r\n    };\r\n  },\r\n  watch: {\r\n    // 对歌曲 id 进行处理\r\n    trackIds: function() {\r\n      // 对歌曲 id 进行处理\r\n      let ids = this.disposeId();\r\n      // 获取歌单信息\r\n      this.getsongdetail(ids);\r\n    },\r\n    // 歌单数据可视化\r\n    songs: function() {\r\n      this.songs.forEach((e, index, arr) => {\r\n        let value = tools._msTos(e.dt);\r\n        arr[index].format_dt = value;\r\n      });\r\n    },\r\n    // 是否播放\r\n    play: function() {\r\n       let audio = document.querySelector(\"audio\");\r\n       if(this.play) {\r\n         if(this.url) {\r\n          audio.play();\r\n         }else {\r\n            this.$message({\r\n              showClose: true,\r\n              message: '亲爱的,暂无版权',\r\n              type: 'error'\r\n            });\r\n         }\r\n       }else {\r\n         audio.pause();\r\n       }\r\n    },\r\n    // 时间戳\r\n    timeStamp: function() {\r\n      // 更新进度条\r\n      let x = this.timeStamp * (this.prograssDistance / this.songTime);\r\n      console.log(\"x：\", x);\r\n      document.querySelector(\".bar\").style.left = x + \"px\";\r\n      document.querySelector(\".current-time\").style.width = x + \"px\";\r\n      // 保存实际滚动距离\r\n      this.x = x;\r\n    },\r\n    item_index: function() {\r\n       let value = this.item_index;\r\n       if(value < 0) this.item_index = 0;\r\n       if(value >= this.currentShowNum) this.item_index = this.currentShowNum - 1;\r\n       \r\n       //  取出数据\r\n       this.songname = this.songs[this.item_index].name;\r\n       this.id = this.songs[this.item_index].id;\r\n       this.dt = this.songs[this.item_index].dt;\r\n       \r\n       // 重置 \r\n       this.reset();\r\n\r\n       //  发送请求\r\n       this.getsongUrl();\r\n       this.getlyric();\r\n       this.getSongImg();\r\n    }\r\n  },\r\n  created() {\r\n    this.getTrackIds();\r\n    this.getsongUrl();\r\n    this.getlyric();\r\n  },\r\n  mounted() {\r\n     this.prograssInit();\r\n  },\r\n  methods: {\r\n    // 处理歌单 id\r\n    disposeId() {\r\n      let start = this.song_page * this.songNum;\r\n      let end = start + this.songNum;\r\n      end = end >= this.trackCount ? this.trackCount : end;\r\n\r\n      let arr = this.trackIds.slice(start, end);\r\n      let str = tools._arrToString(arr);\r\n      return str;\r\n    },\r\n     // 从缓存中获取 trackIds\r\n    getTrackIds() {\r\n      this.trackIds = JSON.parse(window.localStorage.getItem(\"playList\"));\r\n      // 初始化 （默认取出第一首）\r\n      this.id = this.trackIds[0].id;\r\n      // 获取歌单头像\r\n      this.cover = window.localStorage.getItem(\"playListCover\");\r\n    },\r\n    // 获取音频\r\n    getsongUrl() {\r\n      req_song_url(this, { id: this.id })\r\n        .then(res => {\r\n          this.url = res.data[0].url;\r\n          // 初始化 audio\r\n          this.audioInit();\r\n        })\r\n        .catch(error => {\r\n          console.log(error);\r\n        });\r\n    },\r\n    // 获取歌词\r\n    getlyric() {\r\n      req_lyric(this, { id: this.id })\r\n        .then(res => {\r\n          this.parseLyric = tools._parseLyric(res.lrc.lyric);\r\n        })\r\n        .catch(error => {\r\n          console.log(error);\r\n        });\r\n    },\r\n    // 获取歌曲信息\r\n    getsongdetail(ids) {\r\n      req_song_detail(this, {\r\n        ids,\r\n      }).then(res => {\r\n        this.songs = this.songs.concat(res.songs);\r\n        this.song_page++;\r\n        this.currentShowNum = this.songs.length;\r\n\r\n        // 初始化第一首歌名字\r\n        this.songname = this.songs[0].name;\r\n        // 初始化第一首歌时长\r\n        this.songTime = this.songs[0].dt;\r\n        // 获取歌曲头像\r\n        this.getSongImg();\r\n      });\r\n    },\r\n    // 获取歌曲图片\r\n    getSongImg() {\r\n      req_search(this, {\r\n        keywords: this.songname,\r\n      })\r\n        .then(res => {\r\n          this.songUrl = res.result.songs[0].al.picUrl;\r\n        })\r\n        .catch(error => {\r\n          console.log(error);\r\n        });\r\n    },\r\n\r\n    // bar 监听\r\n    barDown() {\r\n      // 允许拖拽\r\n      this.down = true;\r\n      // 音频暂停\r\n      this.play = false;\r\n    },\r\n    // 滚动条监听\r\n    prograssInit() {\r\n      // 保存进度条长度\r\n      this.prograssDistance =\r\n        document.querySelector(\".prograss-container\").offsetWidth -\r\n        document.querySelector(\".bar\").offsetWidth;\r\n\r\n      // 监听进度条拖拽\r\n      document.onmousemove = e => {\r\n        if (this.down) {\r\n          let x = e.pageX;\r\n          let bar = document.querySelector(\".bar\");\r\n          // 进度条容器\r\n          let container = document.querySelector(\".prograss-container\");\r\n          let current = document.querySelector(\".current-time\");\r\n          let prograss_left = document.querySelector(\".prograss\")\r\n            .offsetLeft;\r\n          let container_left = container.offsetLeft;\r\n          let container_width = container.offsetWidth;\r\n          let bar_width = bar.offsetWidth;\r\n          // 移动的距离\r\n          let distance = x - container_left - prograss_left - bar_width / 2;\r\n\r\n          // 判断是否超出范围\r\n          distance = distance < 0 ? 0 : distance;\r\n          distance =\r\n            distance > container_width - bar_width\r\n              ? container_width - bar_width\r\n              : distance;\r\n\r\n          // 设置样式\r\n          bar.style.left = distance + \"px\";\r\n          current.style.width = distance + \"px\";\r\n\r\n        \r\n          // 保存当前滑动的距离\r\n          this.currentDistance = distance;\r\n        }\r\n      };\r\n      // 停止拖拽\r\n      document.onmouseup = () => {\r\n        if (this.down) {\r\n          // 停止拖拽\r\n          this.down = false;\r\n          // 更新当前音频时间\r\n          this.currentTime();\r\n        }\r\n      };\r\n    },\r\n    // 根据距离换算当前歌曲时间\r\n    currentTime() {\r\n      let audio = document.querySelector(\"audio\");\r\n      let x = this.currentDistance * (this.songTime / this.prograssDistance) / 1000;\r\n      audio.currentTime = x;\r\n      // 打开音频播放\r\n      this.play = true;\r\n    },\r\n     // 音频监听\r\n    audioInit() {\r\n      let audio = document.querySelector(\"audio\");\r\n      let lrcContainer = document.querySelector(\".lrc-container\")\r\n     \r\n      // 播放中\r\n      audio.addEventListener(\"timeupdate\", ()=> {\r\n        // 获取此时播放时间\r\n        let currentTime = audio.currentTime ;\r\n        // 更新时间戳\r\n        this.timeStamp = currentTime * 1000;\r\n        let value = (\"\" + currentTime).split(\".\")[0];\r\n        for(let i = 0; i < this.parseLyric.length; i++) {\r\n           if((\"\" + this.parseLyric[i].time).split(\".\")[0] == value) {\r\n              this.active = i;\r\n              let lrc = document.querySelectorAll(\".lrc\")[i];\r\n              lrcContainer.style.top = 100 - lrc.offsetTop  + \"px\";\r\n              break;\r\n           }\r\n        }\r\n      });\r\n\r\n      // 播放结束\r\n      audio.addEventListener(\"ended\", () => {\r\n        this.play = false;\r\n        console.log(\"音频播放结束\");\r\n         // 进度条到底\r\n        this.timeStamp = this.songTime;\r\n        // 重置\r\n        this.reset();\r\n        // 下一首\r\n        this.item_index++;\r\n      })\r\n    },\r\n\r\n    // 播放暂停\r\n    isplay() {\r\n      this.play = !this.play;\r\n    },\r\n    // 跳转\r\n    goSingerDetail(id, name) {\r\n      this.$router.push({\r\n        path: `/singerDetail/${new Date().getTime()}`,\r\n        query: {\r\n          id,\r\n          name,\r\n        },\r\n      });\r\n    },\r\n    // 重置\r\n    reset() {\r\n      // 重置\r\n      let lrcContainer = document.querySelector(\".lrc-container\");\r\n      lrcContainer.style.top = \"100px\";\r\n      this.timeStamp = 0;\r\n      this.play = false;\r\n    }\r\n  },\r\n  beforeDestroy() {\r\n    // 关闭歌曲\r\n    this.play = false;\r\n  }\r\n};\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n@import \"../assets/scss/music.scss\";\r\n@import \"../assets/scss/icons.scss\";\r\n.song {\r\n  position: relative;\r\n  z-index: 3;\r\n  height: 720px;\r\n  .bg {\r\n    position: absolute;\r\n    @include bgmask();\r\n    width: 100%;\r\n    height: 100%;\r\n    overflow: hidden;\r\n    z-index: -1;\r\n  }\r\n  .bgmask {\r\n    width: 100%;\r\n    height: 100%;\r\n    position: absolute;\r\n    top: 0;\r\n    left: 0;\r\n    background-color: rgba(0, 0, 0, 0.35);\r\n    z-index: -2;\r\n  }\r\n  .music-container {\r\n    z-index: 3;\r\n    @include flex();\r\n    padding-top: 80px;\r\n    box-sizing: border-box;\r\n    overflow: hidden;\r\n    .content {\r\n      margin-right: 20px;\r\n      flex: 4;\r\n      height: 600px;\r\n      .song-list {\r\n        height: 500px;\r\n        overflow: auto;\r\n        .song-container {\r\n          .item {\r\n            height: 50px;\r\n            color: #fff;\r\n            @include font(16px, 50px, #fff);\r\n            padding-left: 10px;\r\n            box-sizing: border-box;\r\n            @include flex();\r\n            text-align: left;\r\n            .song-name {\r\n              flex: 2;\r\n              @include fontHidden();\r\n              margin-right: 12px;\r\n              @include flex(flex-start);\r\n              img {\r\n                margin-left: 30px;\r\n                margin-top:-5px;\r\n                width:100px;\r\n                height: 50px;\r\n              }\r\n            }\r\n            .singer-name {\r\n              flex: 1;\r\n              @include fontHidden();\r\n              margin-right: 12px;\r\n            }\r\n            .time {\r\n              width: 79px;\r\n              height: 100%;\r\n              @include fontHidden();\r\n            }\r\n            .song-active {\r\n              color: $colorA;\r\n            }\r\n            &:nth-child(n+2) {\r\n               span {\r\n                 &:hover {\r\n                   color: $colorA;\r\n                   cursor: pointer;\r\n                 }\r\n               }\r\n            }\r\n          }\r\n        }\r\n      }\r\n      .prograss {\r\n        position: relative;\r\n        margin-top: 20px;\r\n        height: 90px;\r\n        // background-color: red;\r\n        display: flex;\r\n        justify-content: flex-start;\r\n        padding: 10px 20px;\r\n        box-sizing: border-box;\r\n        .left {\r\n          display: flex;\r\n          justify-content: flex-start;\r\n          margin-right: 20px;\r\n          margin-top: 13px;\r\n          .item {\r\n            width: 100px;\r\n            height: 40px;\r\n            margin-right: 10px;\r\n            background-repeat: no-repeat;\r\n            background-size: 40px 40px;\r\n            background-position: 10px 10px;\r\n            &:hover {\r\n              color: #31c27c;\r\n            }\r\n            &:last-child {\r\n              margin-right: 0;\r\n              padding-top: 5px;\r\n              box-sizing: border-box;\r\n              margin-left: -30px;\r\n            }\r\n            &:nth-child(2) {\r\n              font-size: 40px;\r\n            }\r\n            &:nth-child(1) {\r\n              padding-top: 5px;\r\n              box-sizing: border-box;\r\n              padding-left: 40px;\r\n            }\r\n          }\r\n        }\r\n        .prograss-container {\r\n          position: absolute;\r\n          top: 0;\r\n          bottom: 0;\r\n          right: 39px;\r\n          margin-top: auto;\r\n          margin-bottom: auto;\r\n          width: 600px;\r\n          height: 6px;\r\n          background-color: #ffffff;\r\n          border-radius: 40px;\r\n          .current-time {\r\n            position: absolute;\r\n            top: 0px;\r\n            left: 0px;\r\n            width: 0px;\r\n            height: 100%;\r\n            background-color: #31c27c;\r\n            background-image: linear-gradient(to right, #43e97b 0%, #38f9d7 100%);\r\n          }\r\n          .bar {\r\n            position: absolute;\r\n            top: -5px;\r\n            left: 0px;\r\n            width: 16px;\r\n            height: 16px;\r\n            border-radius: 50%;\r\n            background-color: #31c27c;\r\n            background-image: linear-gradient(to right, #43e97b 0%, #38f9d7 100%);\r\n          }\r\n        }\r\n      }\r\n    }\r\n    .aside {\r\n      flex: 1;\r\n      height: 600px;\r\n      .current-song {\r\n        height: 200px;\r\n        @include flex(center);\r\n        img {\r\n          width: 200px;\r\n          border-radius: 50%;\r\n          display: block;\r\n        }\r\n        .animation-rotate {\r\n          animation-name: rotate;\r\n          animation-duration: 2s;\r\n          animation-timing-function: linear;\r\n          animation-iteration-count: infinite;\r\n        }\r\n\r\n      }\r\n      .lyric {\r\n        margin-top: 12px;\r\n        height: 427px;\r\n        text-align: center;\r\n        position: relative;\r\n        @include font(14px, 28px, #fff);\r\n        overflow: hidden;\r\n        .lrc-container {\r\n          width: 200px;\r\n          text-align: center;\r\n          position: absolute;\r\n          top: 100px;\r\n          left: 0;\r\n          right: 0;\r\n          margin-left: auto;\r\n          margin-right: auto;\r\n          .lrc {\r\n            display: block;\r\n            // height: 28px;\r\n            margin-top: 15px;\r\n            // @include fontHidden();\r\n          }\r\n          .active {\r\n            color: $colorA;\r\n            font-size: 16px;\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n@keyframes rotate {\r\n    from {\r\n        transform: rotateZ(0deg);\r\n    }\r\n    to {\r\n        transform: rotateZ(360deg);\r\n    }\r\n}\r\n// 隐藏浏览器掉滚轮\r\nhtml {\r\n  -ms-overflow-style: none;\r\n  overflow: -moz-scrollbars-none;\r\n}\r\nhtml::-webkit-scrollbar {\r\n  width: 0px;\r\n}\r\n// 滚动条\r\n.song-list::-webkit-scrollbar {\r\n  width: 6px;\r\n  height: 6px;\r\n}\r\n.song-list::-webkit-scrollbar-track {\r\n  background-color: rgba(0, 0, 0, 0.1);\r\n  border-radius: 2em;\r\n}\r\n.song-list::-webkit-scrollbar-thumb {\r\n  background-color: rgba(0, 0, 0, 0.4);\r\n  border-radius: 2em;\r\n}\r\n.song-list::-webkit-scrollbar-corner {\r\n  background-color: transparent;\r\n}\r\n</style>","import mod from \"-!../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--12-0!../../node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js!../../node_modules/_babel-loader@8.2.2@babel-loader/lib/index.js!../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--0-0!../../node_modules/_vue-loader@15.9.8@vue-loader/lib/index.js??vue-loader-options!./Song.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--12-0!../../node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js!../../node_modules/_babel-loader@8.2.2@babel-loader/lib/index.js!../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--0-0!../../node_modules/_vue-loader@15.9.8@vue-loader/lib/index.js??vue-loader-options!./Song.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Song.vue?vue&type=template&id=0910a504&scoped=true&\"\nimport script from \"./Song.vue?vue&type=script&lang=js&\"\nexport * from \"./Song.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Song.vue?vue&type=style&index=0&id=0910a504&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/_vue-loader@15.9.8@vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"0910a504\",\n  null\n  \n)\n\nexport default component.exports","import { require } from \"../require\";\r\nimport {\r\n    introduce_playList,\r\n    update_playList_type,\r\n    high_quality_playList,\r\n    dvd,\r\n    exclusive,\r\n    playList_all_songId,\r\n    song_detail,\r\n    playList_subscribers,\r\n    hotList,\r\n    song_url,\r\n    lyrics,\r\n    checkMusic,\r\n} from \"../url\";\r\n\r\n/**\r\n * 获取推荐歌单  playList\r\n */\r\nfunction req_introduce_playList(context, params = {}) {\r\n    return require(introduce_playList, params, context);\r\n}\r\n\r\n/**\r\n * 更新歌单类型 tab\r\n */\r\nfunction req_update_playList_Tab(context, params = {}) {\r\n    return require(update_playList_type, params, context);\r\n}\r\n\r\n/** \r\n*  高质量歌单 highquality\r\n*/\r\nfunction req_high_quality_playList(context, params = {}) {\r\n    return require(high_quality_playList, params, context);\r\n}\r\n\r\n/**\r\n * 获取新碟 disc\r\n */\r\nfunction req_disc(context, params = {}) {\r\n    return require(dvd, params, context);\r\n}\r\n\r\n/**\r\n * 获取独家放送 unipue\r\n */\r\nfunction req_unipue(context, params = {}) {\r\n    return require(exclusive, params, context);\r\n}\r\n\r\n/**\r\n * 获取歌单中歌曲的所有 id songAllid\r\n */\r\nfunction req_playList_in_songAllid(context, params = {}) {\r\n    return require(playList_all_songId, params, context);\r\n}\r\n\r\n/**\r\n * 获取歌曲的信息 songDetail\r\n */\r\nfunction req_song_detail(context, params = {}) {\r\n    return require(song_detail, params, context);\r\n}\r\n\r\n/**\r\n * 获取歌单收藏者 subscribers\r\n */\r\nfunction req_playList_subscribers(context, params = {}) {\r\n    return require(playList_subscribers, params, context);\r\n}\r\n\r\n/**\r\n * 所有榜单 toplist\r\n */\r\nfunction req_All_topList(context, params = {}) {\r\n    return require(hotList, params, context);\r\n}\r\n\r\n/**\r\n * 获取音频 songUrl\r\n */\r\nfunction req_song_url(context, params = {}) {\r\n    return require(song_url, params, context);\r\n}\r\n\r\n/**\r\n * 获取歌词  lyric\r\n */\r\nfunction req_lyric(context, params = {}) {\r\n    return require(lyrics, params, context);\r\n}\r\n\r\n/**\r\n * 判断歌曲是否可以播放\r\n */\r\nfunction req_checkMusic(context, params = {}) {\r\n    return require(checkMusic, params, context);\r\n}\r\nexport {\r\n    req_introduce_playList,\r\n    req_update_playList_Tab,\r\n    req_high_quality_playList,\r\n    req_disc,\r\n    req_unipue,\r\n    req_playList_in_songAllid,\r\n    req_song_detail,\r\n    req_playList_subscribers,\r\n    req_All_topList,\r\n    req_song_url,\r\n    req_lyric,\r\n    req_checkMusic\r\n}","var DESCRIPTORS = require('../internals/descriptors');\nvar FUNCTION_NAME_EXISTS = require('../internals/function-name').EXISTS;\nvar defineProperty = require('../internals/object-define-property').f;\n\nvar FunctionPrototype = Function.prototype;\nvar FunctionPrototypeToString = FunctionPrototype.toString;\nvar nameRE = /^\\s*function ([^ (]*)/;\nvar NAME = 'name';\n\n// Function instances `.name` property\n// https://tc39.es/ecma262/#sec-function-instances-name\nif (DESCRIPTORS && !FUNCTION_NAME_EXISTS) {\n  defineProperty(FunctionPrototype, NAME, {\n    configurable: true,\n    get: function () {\n      try {\n        return FunctionPrototypeToString.call(this).match(nameRE)[1];\n      } catch (error) {\n        return '';\n      }\n    }\n  });\n}\n","export * from \"-!../../node_modules/_mini-css-extract-plugin@0.9.0@mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/_css-loader@3.6.0@css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/_vue-loader@15.9.8@vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/_sass-loader@8.0.2@sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--0-0!../../node_modules/_vue-loader@15.9.8@vue-loader/lib/index.js??vue-loader-options!./Song.vue?vue&type=style&index=0&id=0910a504&lang=scss&scoped=true&\""],"sourceRoot":""}