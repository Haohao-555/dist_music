(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-43f2f586"],{"129f":function(t,e){t.exports=Object.is||function(t,e){return t===e?0!==t||1/t===1/e:t!=t&&e!=e}},"2fe3":function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var i=n("e760"),s=n("4c8d");function a(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(i["a"])(s["t"],e,t)}},"34d7":function(t,e,n){},7443:function(t,e,n){"use strict";n("f9e5")},"75ca":function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"singer-detail"}},[n("div",{staticClass:"music-container"},[n("h2",[t._v("歌手介绍")]),n("div",{staticClass:"singer-header"},[n("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.picUrl,expression:"picUrl"}],attrs:{alt:""}}),n("div",{staticClass:"info"},[t._v(t._s(t.briefDesc))])]),t._m(0),t._m(1),n("div",{staticClass:"song-container"},t._l(t.songs,(function(e,i){return n("song-item",{key:i,attrs:{index:i,songId:e.id,alId:e.al.id,arId:e.ar[0].id,songName:e.name,alName:e.al.name,arName:e.ar[0].name,formatdt:e.format_dt,dt:e.dt},on:{play:t.play}})})),1),t.show?n("h2",[t._v("MV")]):t._e(),n("div",{staticClass:"mv-container"},t._l(t.mv,(function(t,e){return n("mv-item",{key:e,staticClass:"item",attrs:{mvId:t.id,cover:t.imgurl,name:t.name,artistName:t.artistName,artists:t.artists,playCount:t.playCount}})})),1)]),n("transition",{attrs:{name:"prograss"}},[n("music-prograss",{directives:[{name:"show",rawName:"v-show",value:t.musicPrograss,expression:"musicPrograss"}],staticClass:"music-prograss"})],1)],1)},s=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("h2",[t._v(" 热门歌曲 "),n("button",{staticClass:"btn"},[t._v("播放全部")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"song-header"},[n("div",{staticClass:"id nav"},[t._v("序号")]),n("div",{staticClass:"name nav"},[t._v("歌名")]),n("div",{staticClass:"songer nav"},[t._v("歌手")]),n("div",{staticClass:"time nav"},[t._v("时长")]),n("div",{staticClass:"album nav"},[t._v("专辑")])])}],a=(n("b0c0"),n("d3b7"),n("159b"),n("ac1f"),n("841c"),n("fb6a"),n("d81d"),n("e9c4"),n("c912")),r=n("2fe3"),o=n("7a1c"),c=n("ca85"),u=n("b8eb"),l=n("7c27"),d=n("d84b"),m={name:"SingerDetail",components:{songItem:u["a"],mvItem:l["a"],musicPrograss:d["a"]},data:function(){return{id:this.$route.query.id,name:this.$route.query.name,picUrl:"",mv:[],briefDesc:"",songs:[],show:!1,musicPrograss:this.$store.state.musicPrograss}},watch:{songs:function(){this.songs.forEach((function(t,e,n){var i=o["a"]._msTos(t.dt);n[e].format_dt=i}))},mv:function(){this.mv.forEach((function(t,e,n){var i=o["a"]._tranNumber(t.playCount,2);n[e].playCount=i}))},"$store.state.musicPrograss":function(){this.musicPrograss=this.$store.state.musicPrograss}},created:function(){this.getSingerMv(),this.getSingerDesc(),this.getSingerAlbum(),this.search()},mounted:function(){this.init()},methods:{init:function(){window.addEventListener("scroll",this.menu)},getSingerMv:function(){var t=this;Object(a["d"])(this,{id:this.id}).then((function(e){t.mv=e.mvs.slice(0,8)})).catch((function(t){console.log("获取歌手 MV可能出现错误",t)}))},getSingerDesc:function(){var t=this;Object(a["c"])(this,{id:this.id}).then((function(e){t.briefDesc=e.briefDesc})).catch((function(t){console.log("获取歌曲歌手信息",t)}))},getSingerAlbum:function(){var t=this;Object(a["b"])(this,{id:this.id}).then((function(e){t.songs=e.songs,t.show=!0})).catch((function(t){console.log("获取歌手歌曲可能出现错误",t)}))},search:function(){var t=this;Object(r["a"])(this,{keywords:this.name,type:100}).then((function(e){t.picUrl=e.result.artists[0].picUrl})).catch((function(t){console.log("获取歌手头像可能出现错误",t)}))},playAll:function(){var t=this.songs.map((function(t){return{id:t.al.id}}));window.localStorage.setItem("playList",JSON.stringify(t)),window.localStorage.setItem("playListCover",this.picUrl),window.localStorage.setItem("trackCount",50),this.$router.push({path:"/song/".concat((new Date).getTime())})},play:function(t,e,n){var i=this;Object(c["b"])(this,{id:t}).then((function(s){var a=s.success;if(a){var r={playSongId:t,playSongname:e,songTime:n};window.localStorage.setItem("currentPlay",JSON.stringify(r)),i.$store.dispatch("saveMusicLoading",Math.random()),i.$store.dispatch("saveMusicPrograss",!0)}})).catch((function(){i.$message({showClose:!0,message:"亲爱的,暂无版权",type:"error"}),i.$store.dispatch("saveLoadingFlag",!1)}))},menu:function(){var t=document.documentElement.scrollTop||document.body.scrollTop;t>1200&&this.$store.dispatch("saveMusicPrograss",!1),t<300&&this.$store.dispatch("saveMusicPrograss",!0)}},beforeDestroy:function(){window.removeEventListener("scroll",this.menu)}},g=m,f=(n("f54b"),n("2877")),v=Object(f["a"])(g,i,s,!1,null,null,null);e["default"]=v.exports},"7c27":function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"mv-item",on:{click:function(e){return t.goMvDetail(t.mvId)}}},[n("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.cover,expression:"cover"}],attrs:{alt:""}}),n("p",{staticClass:"name",on:{click:function(e){return t.goMvDetail(t.mvId)}}},[t._v(t._s(t.name)+" / "+t._s(t.artistName))]),n("div",{staticClass:"artists"},t._l(t.artists,(function(e,i){return n("span",{key:i,staticClass:"artist",on:{click:function(n){return n.stopPropagation(),t.goSingerDetail(e.id,e.name)}}},[t._v(t._s(e.name))])})),0),n("div",{staticClass:"mask"},[n("div",{staticClass:"count"},[t._v("播放量 "+t._s(t.playCount))])])])},s=[],a=(n("a9e3"),{name:"playList-item",props:{mvId:Number,cover:String,name:String,artistName:String,artists:Array,playCount:String},watch:{},methods:{goMvDetail:function(t){this.$router.push({path:"/mvdetail/".concat((new Date).getTime()),query:{id:t}})},goSingerDetail:function(t,e){this.$router.push({path:"/singerDetail/".concat((new Date).getTime()),query:{id:t,name:e}})}}}),r=a,o=(n("7443"),n("2877")),c=Object(o["a"])(r,i,s,!1,null,null,null);e["a"]=c.exports},"841c":function(t,e,n){"use strict";var i=n("c65b"),s=n("d784"),a=n("825a"),r=n("1d80"),o=n("129f"),c=n("577e"),u=n("dc4a"),l=n("14c3");s("search",(function(t,e,n){return[function(e){var n=r(this),s=void 0==e?void 0:u(e,t);return s?i(s,e,n):new RegExp(e)[t](c(n))},function(t){var i=a(this),s=c(t),r=n(e,i,s);if(r.done)return r.value;var u=i.lastIndex;o(u,0)||(i.lastIndex=0);var d=l(i,s);return o(i.lastIndex,u)||(i.lastIndex=u),null===d?-1:d.index}]}))},b0c0:function(t,e,n){var i=n("83ab"),s=n("5e77").EXISTS,a=n("e330"),r=n("9bf2").f,o=Function.prototype,c=a(o.toString),u=/^\s*function ([^ (]*)/,l=a(u.exec),d="name";i&&!s&&r(o,d,{configurable:!0,get:function(){try{return l(u,c(this))[1]}catch(t){return""}}})},b8eb:function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"song"}},[n("div",{staticClass:"id item-d"},[t._v(t._s(t.index+1))]),n("div",{staticClass:"name item-d hover",on:{click:function(e){return t.goSong(t.songId,t.songName,t.dt)}}},[t._v(t._s(t.songName))]),n("div",{staticClass:"songer item-d hover",on:{click:function(e){return t.goSingerDetail(t.arId,t.arName)}}},[t._v(t._s(t.arName))]),n("div",{staticClass:"time item-d"},[t._v(t._s(t.formatdt))]),n("div",{staticClass:"album item-d hover",on:{click:function(e){return t.album(t.alId)}}},[t._v(t._s(t.alName))])])},s=[],a=(n("a9e3"),{name:"song",props:{index:Number,songId:Number,alId:Number,arId:Number,songName:String,alName:String,arName:String,formatdt:String,dt:Number},methods:{goSong:function(t,e,n){this.$emit("play",t,e,n)},goSingerDetail:function(t,e){this.$router.push({path:"/singerDetail/".concat((new Date).getTime()),query:{id:t,name:e}})},album:function(t){this.$message({showClose:!0,message:"链接：https://music.163.com/#/album?id="+t,type:"success"})}}}),r=a,o=(n("debe"),n("2877")),c=Object(o["a"])(r,i,s,!1,null,null,null);e["a"]=c.exports},c912:function(t,e,n){"use strict";n.d(e,"a",(function(){return a})),n.d(e,"b",(function(){return c})),n.d(e,"d",(function(){return r})),n.d(e,"c",(function(){return o}));var i=n("e760"),s=n("4c8d");function a(t,e){return Object(i["a"])(s["x"],e,t)}function r(t,e){return Object(i["a"])(s["y"],e,t)}function o(t,e){return Object(i["a"])(s["w"],e,t)}function c(t,e){return Object(i["a"])(s["v"],e,t)}},ca85:function(t,e,n){"use strict";n.d(e,"d",(function(){return a})),n.d(e,"k",(function(){return r})),n.d(e,"c",(function(){return o})),n.d(e,"j",(function(){return c})),n.d(e,"f",(function(){return u})),n.d(e,"h",(function(){return l})),n.d(e,"g",(function(){return d})),n.d(e,"a",(function(){return m})),n.d(e,"i",(function(){return g})),n.d(e,"e",(function(){return f})),n.d(e,"b",(function(){return v}));var i=n("e760"),s=n("4c8d");function a(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(i["a"])(s["g"],e,t)}function r(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(i["a"])(s["C"],e,t)}function o(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(i["a"])(s["b"],e,t)}function c(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(i["a"])(s["c"],e,t)}function u(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(i["a"])(s["p"],e,t)}function l(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(i["a"])(s["z"],e,t)}function d(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(i["a"])(s["r"],e,t)}function m(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(i["a"])(s["e"],e,t)}function g(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(i["a"])(s["A"],e,t)}function f(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(i["a"])(s["j"],e,t)}function v(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(i["a"])(s["a"],e,t)}},d236:function(t,e,n){},d81d:function(t,e,n){"use strict";var i=n("23e7"),s=n("b727").map,a=n("1dde"),r=a("map");i({target:"Array",proto:!0,forced:!r},{map:function(t){return s(this,t,arguments.length>1?arguments[1]:void 0)}})},d84b:function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"music-prograss"}},[n("div",{staticClass:"left"},[n("div",{class:["item","iconfont",t.play?"icon-zanting":"icon-bofang"],on:{click:t.isplay}})]),n("div",{staticClass:"song"},[n("div",{staticClass:"name"},[t._v(t._s(t.playSongname))]),n("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.songUrl,expression:"songUrl"}],attrs:{alt:""}})]),n("div",{staticClass:"right"},[n("div",{staticClass:"prograss-container"},[n("div",{staticClass:"current-time"}),n("div",{staticClass:"bar",on:{mousedown:t.barDown}})]),n("div",{staticClass:"time"},[t._v(t._s(Math.floor(t.songTime/6e4)+":"+Math.ceil(t.songTime%6e4/1e3)))])]),n("audio",{attrs:{src:t.audioUrl}})])},s=[],a=n("ca85"),r=n("2fe3"),o={name:"prograss",data:function(){return{down:!1,play:!1,audioUrl:"",prograssDistance:0,currentDistance:0,timeStamp:0,audio:this.$store.state.audio,songUrl:"",x:0,playSongId:0,playSongname:"",songTime:0}},watch:{"$store.state.play":function(){var t=document.querySelector("audio");this.$store.state.play?(t.play(),this.play=!0):(t.pause(),this.play=!1)},timeStamp:function(){var t=this.timeStamp*(this.prograssDistance/this.songTime);document.querySelector(".bar").style.left=t+"px",document.querySelector(".current-time").style.width=t+"px",this.x=t},"$store.state.musicLoading":function(){this.prograssInit(),this.getStorage(),this.getsongUrl(),this.getSongImg()}},mounted:function(){window.localStorage.getItem("currentPlay")&&(this.getStorage(),this.prograssInit(),this.getsongUrl(),this.getSongImg(),this.$store.dispatch("saveMusicPrograss",!0))},methods:{getStorage:function(){var t=JSON.parse(window.localStorage.getItem("currentPlay"));this.playSongId=t.playSongId,this.playSongname=t.playSongname,this.songTime=t.songTime},currentTime:function(){var t=document.querySelector("audio"),e=this.currentDistance*(this.songTime/this.prograssDistance)/1e3;t.currentTime=e,this.$store.dispatch("savePlay",!0)},prograssInit:function(){var t=this;this.prograssDistance=document.querySelector(".prograss-container").offsetWidth-document.querySelector(".bar").offsetWidth,document.onmousemove=function(e){if(t.down){var n=e.pageX,i=document.querySelector(".bar"),s=document.querySelector(".prograss-container"),a=document.querySelector(".current-time"),r=document.querySelector("#music-prograss").offsetLeft,o=s.offsetLeft,c=s.offsetWidth,u=i.offsetWidth,l=n-o-r-u/2;l=l<0?0:l,l=l>c-u?c-u:l,i.style.left=l+"px",a.style.width=l+"px",t.currentDistance=l}},document.onmouseup=function(){t.down&&(t.down=!1,t.currentTime())}},audioInit:function(){var t=this,e=document.querySelector("audio");e.addEventListener("timeupdate",(function(){var n=1e3*e.currentTime;t.timeStamp=n})),e.addEventListener("ended",(function(){t.$store.dispatch("saveMusicPrograss",!1),console.log("音频播放结束"),t.timeStamp=t.songTime,t.songId="",t.songName="",t.songTime=""}))},barDown:function(){this.down=!0,this.$store.dispatch("savePlay",!1)},getsongUrl:function(){var t=this;this.$store.dispatch("savePlay",!1),this.timeStamp=0,Object(a["i"])(this,{id:this.playSongId}).then((function(e){t.audioUrl=e.data[0].url,t.audioInit()})).catch((function(t){console.log("获取音频可能出现错误",t)}))},getSongImg:function(){var t=this;Object(r["a"])(this,{keywords:this.playSongname}).then((function(e){t.songUrl=e.result.songs[0].al.picUrl})).catch((function(t){console.log("获取歌曲图片可能出现错误",t)}))},isplay:function(){var t=this.$store.state.play;this.$store.dispatch("savePlay",!t)}},beforeDestroy:function(){this.$store.dispatch("savePlay",!1)}},c=o,u=(n("d9a1"),n("2877")),l=Object(u["a"])(c,i,s,!1,null,null,null);e["a"]=l.exports},d9a1:function(t,e,n){"use strict";n("d236")},debe:function(t,e,n){"use strict";n("34d7")},e27f:function(t,e,n){},f54b:function(t,e,n){"use strict";n("e27f")},f9e5:function(t,e,n){}}]);